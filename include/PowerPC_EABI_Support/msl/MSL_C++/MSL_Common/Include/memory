#ifndef _MSL_MEMORY
#define _MSL_MEMORY

#include <cstdio>
#include <cstdlib>

namespace std {

// FIXME: This needs a home.
inline void __msl_error(const char* msg) {
    fprintf(stderr, msg);
    abort();
}

template <typename T>
struct allocator {
    // FIXME: This needs to be different for other types, if we end up needing them
    allocator() {}

    // TODO

    T* allocate(size_t n, const void* hint) {
        T* ptr = (T*)operator new(n * 4);
        if (ptr == NULL) {
            __msl_error("Memory allocation failure");
        }
        return ptr;
    }
};

}

#endif
